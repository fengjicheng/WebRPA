export const debugGuideContent = `# 🐛 调试与错误处理

本章介绍如何调试工作流、处理错误和优化性能。

---

## 📋 日志面板

日志面板是调试工作流的核心工具，位于界面底部。

### 日志标签页

显示工作流执行过程中的所有日志信息。

**日志级别**：
| 级别 | 颜色 | 用途 |
|------|------|------|
| info | 蓝色 | 普通信息 |
| success | 绿色 | 成功操作 |
| warning | 黄色 | 警告信息 |
| error | 红色 | 错误信息 |

### 数据表格标签页

显示采集的数据，支持：
- 实时预览
- 手动编辑
- 导出CSV

### 变量标签页

显示所有变量及其当前值：
- 实时更新
- 类型显示
- 手动添加/修改

---

## 🔍 调试技巧

### 1. 打印日志

在关键位置添加"打印日志"模块：

\`\`\`
打印日志：开始处理第 {index} 条数据
打印日志：商品名称={商品名}，价格={价格}
打印日志：API响应={响应数据}
\`\`\`

### 2. 分步执行

将复杂工作流拆分成小段测试：

\`\`\`
第一步：只测试打开网页
第二步：添加数据提取
第三步：添加循环逻辑
第四步：添加数据保存
\`\`\`

### 3. 变量监控

在变量面板实时观察变量变化：
- 确认变量是否正确创建
- 检查变量值是否符合预期
- 发现数据类型问题

### 4. 条件断点

使用条件判断创建"断点"：

\`\`\`
条件判断：{调试模式} == true
  └─ 真 → 用户输入（暂停等待）
\`\`\`

---

## ⚠️ 常见错误

### 元素找不到

**错误信息**：
\`\`\`
Element not found: #selector
Timeout waiting for element
\`\`\`

**可能原因**：
1. 选择器不正确
2. 元素还未加载
3. 元素在 iframe 中
4. 页面结构变化

**解决方法**：
\`\`\`
1. 使用元素选择器重新选择
2. 添加"等待元素"模块
3. 增加等待时间
4. 检查页面是否正常加载
\`\`\`

### 超时错误

**错误信息**：
\`\`\`
Timeout 60000ms exceeded
Navigation timeout
执行超时 (65000ms > 60000ms)
\`\`\`

**可能原因**：
1. 网络慢
2. 页面加载时间长
3. 等待条件永远不满足

**解决方法**：
\`\`\`
1. 增加超时时间
2. 使用更宽松的等待条件
3. 检查网络连接
4. 优化选择器
\`\`\`

**不受超时限制的模块**：

以下模块不会触发超时错误（因为它们本身就是用来等待或控制流程的）：

| 模块类型 | 说明 |
|----------|------|
| 固定等待 | 本身就是等待模块 |
| 等待元素 | 有自己的等待逻辑 |
| 定时执行 | 用于定时任务 |
| 用户输入 | 需要等待用户操作 |
| 循环/遍历 | 流程控制模块 |
| 条件判断 | 瞬时执行 |
| 打印日志 | 瞬时执行 |
| 设置变量 | 瞬时执行 |

### 变量未定义

**错误信息**：
\`\`\`
Variable 'xxx' is not defined
Cannot read property of undefined
\`\`\`

**可能原因**：
1. 变量名拼写错误
2. 变量未创建
3. 作用域问题

**解决方法**：
\`\`\`
1. 检查变量名拼写
2. 确保变量在使用前已创建
3. 检查循环变量作用域
\`\`\`

### 类型错误

**错误信息**：
\`\`\`
Cannot compare string with number
Invalid JSON format
\`\`\`

**可能原因**：
1. 数据类型不匹配
2. JSON格式错误
3. 空值处理不当

**解决方法**：
\`\`\`
1. 确保比较的数据类型一致
2. 验证JSON格式
3. 添加空值检查
\`\`\`

---

## 🛡️ 错误处理策略

### 1. 预防性检查

在操作前检查条件：

\`\`\`
条件判断：{元素存在} == true
  ├─ 真 → 执行点击
  └─ 假 → 打印警告日志
\`\`\`

### 2. 重试机制

对于可能失败的操作，使用循环重试：

\`\`\`
设置变量：重试次数 = 0
设置变量：成功 = false

条件循环：{成功} == false AND {重试次数} < 3
  ├─ 尝试执行操作
  ├─ 条件判断：操作是否成功
  │   ├─ 是 → 设置变量：成功 = true
  │   └─ 否 → 设置变量：重试次数 = {重试次数} + 1
  │           等待 2000 毫秒
\`\`\`

### 3. 优雅降级

当主要方法失败时，尝试备选方案：

\`\`\`
尝试方法A
条件判断：方法A成功
  ├─ 是 → 继续
  └─ 否 → 尝试方法B
          条件判断：方法B成功
            ├─ 是 → 继续
            └─ 否 → 记录错误，跳过
\`\`\`

### 4. 错误日志

记录详细的错误信息：

\`\`\`
打印日志（error级别）：
  操作失败
  - 模块：获取元素信息
  - 选择器：{选择器}
  - 页面URL：{当前URL}
  - 时间：{当前时间}
\`\`\`

---

## ⚡ 性能优化

### 减少等待时间

\`\`\`
❌ 不推荐：
等待 5000 毫秒（固定等待）

✅ 推荐：
等待元素 #content 出现（智能等待）
\`\`\`

### 优化选择器

\`\`\`
❌ 慢：
body > div > div > div > ul > li:nth-child(1) > a

✅ 快：
#menu > li:first-child > a
.nav-item.active
\`\`\`

### 批量操作

\`\`\`
❌ 低效：
循环100次，每次保存一条数据

✅ 高效：
循环100次收集数据，最后一次性保存
\`\`\`

### 合理的并行

\`\`\`
独立任务可以并行执行：
  ├─ 任务A（独立）
  ├─ 任务B（独立）
  └─ 任务C（独立）

有依赖的任务必须顺序执行：
任务A → 任务B（依赖A的结果）→ 任务C
\`\`\`

---

## 📊 监控与统计

### 执行时间

在日志中记录关键操作的时间：

\`\`\`
获取时间 → 保存到：开始时间
执行操作...
获取时间 → 保存到：结束时间
打印日志：操作耗时 = {结束时间} - {开始时间}
\`\`\`

### 成功率统计

\`\`\`
设置变量：总数 = 0
设置变量：成功数 = 0

循环执行
  ├─ 设置变量：总数 = {总数} + 1
  ├─ 执行操作
  ├─ 条件判断：成功
  │   └─ 是 → 设置变量：成功数 = {成功数} + 1

打印日志：成功率 = {成功数}/{总数}
\`\`\`

---

## 🔧 调试清单

执行工作流前检查：

- [ ] 选择器是否正确？
- [ ] 变量名是否拼写正确？
- [ ] 等待时间是否足够？
- [ ] 循环条件是否会终止？
- [ ] 数据类型是否匹配？

执行失败后检查：

- [ ] 查看错误日志
- [ ] 检查变量面板
- [ ] 确认页面状态
- [ ] 验证网络连接
- [ ] 尝试手动执行相同操作

---

## 💡 调试最佳实践

### 1. 从简单开始

先让最简单的版本工作，再逐步添加功能。

### 2. 保存中间状态

定期导出数据，避免全部丢失。

### 3. 使用有意义的日志

\`\`\`
❌ 不好：
打印日志：111
打印日志：到这了

✅ 好：
打印日志：[步骤1] 开始登录
打印日志：[步骤2] 登录成功，用户={用户名}
\`\`\`

### 4. 版本管理

定期导出工作流备份，方便回滚。

### 5. 文档记录

为复杂的工作流添加注释（使用分组模块）。`
